<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="Sample Gadget Map" directory_title="Nike Plus Map It" category="news" category2="tools" render_inline="optional" height="350" description="View Nike Plus user's runs in you area" />
  <UserPref name="loc" display_name="Zip Code" datatype="location" required="true" default_value="ec1m"/>
  <UserPref name="clickurl" datatype="hidden" default_value="http://gadgetads.googlecode.com/svn/trunk/test_clickurl.html?url="  />
  <UserPref datatype="hidden" name="aiturl"/>
  <Content type="html"><![CDATA[
    <style>
      #topContainer	{
        width: 100%; 
        height: 25px; 
        background:url("/ig/proxy?url=http://nikeplus.nike.com/nikeplus/emea/v1/nikegadget/images/img_top_centre.jpg") center repeat-x; 
        position:relative;
      }
      #mapContainer {
        width: 100%; 
        height: 300px
      }
      #infoContainer {
        width: 100%; 
        height: 24px; 
        font:0.7em Verdana, sans-serif; 
        color:#FFF; 
        background:url("/ig/proxy?url=http://nikeplus.nike.com/nikeplus/emea/v1/nikegadget/images/img_bottom_centre.jpg") center repeat-x; 
        position:relative;
      }
      .infoMessage {
        position: absolute;
        top: 5px;
        left: 100px;
        z-index: 100;
      }
      .left		{position:absolute; left:0; z-index:1;}
      .right		{position:absolute; right:-1; z-index:1;}
      a img		{border:none;}
    </style>

    <script>
      // Real gadget URL
      var REAL_GADGET_URL = 'http://nikeplus.nike.com/nikeplus/emea/v1/nikegadget/nike_gadget.xml';
      
      _IG_RegisterOnloadHandler(function() {
          var prefs = new _IG_Prefs();
          
          // Setup click-through on top link
          var iconLink = _gel('NikePlusIconLink');
          iconLink.href = prefs.getString('clickurl') + _esc(iconLink.href);
          
          // Setup static image to load real gadget user clicks on it.
          var staticImg = _IG_GetImage('http://gadgetads.googlecode.com/svn/trunk/nike_static.jpg');
          staticImg.onclick = function() {
              var newUrl = window.location.href.replace(/url=[^?]+/, 'url=' + _esc(REAL_GADGET_URL));
              window.location.replace(newUrl);
            };
          _gel('mapContainer').appendChild(staticImg);
        });
    </script>
    
    <div id="topContainer">
      <a id="NikePlusIconLink" href="http://www.nike.com/nikeplus/#mapit" target="_blank"><img class="left" src="/ig/proxy?url=http://nikeplus.nike.com/nikeplus/emea/v1/nikegadget/images/img_top_left.jpg" width="361" height="25" alt="Nike +" /></a>
      <img class="right" src="/ig/proxy?url=http://nikeplus.nike.com/nikeplus/emea/v1/nikegadget/images/img_top_right.jpg" width="6" height="25" alt="" />
    </div>
    <div id="mapContainer"></div>
    <div id="infoContainer">
      <div class="infoMessage">Just do it: Click on map to find jogging routes.</div>
      <img class="left" src="/ig/proxy?url=http://nikeplus.nike.com/nikeplus/emea/v1/nikegadget/images/img_bottom_left.jpg" width="184" height="24" alt="" />      
      <img class="right" src="/ig/proxy?url=http://nikeplus.nike.com/nikeplus/emea/v1/nikegadget/images/img_bottom_right.jpg" width="172" height="24" alt="" />
    </div>
  ]]></Content>
</Module>