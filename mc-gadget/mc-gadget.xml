<?xml version="1.0" encoding="UTF-8" ?>
<Module>
    <ModulePrefs title="MILLIONENchance.de - Lottogutschein" width="300" height="250"/>
    <UserPref name="clickurl" datatype="hidden" default_value="http://gadgetads.googlecode.com/svn/trunk/test_clickurl.html?url="/>
    <Content type="html"><![CDATA[
        <style type="text/css">
            * {
                    margin:0;
                    padding:0;
                }

            a {
                    color:#000;
                }
            img {
                    border:0;
                }
            #container {
                    background-color:#efefef;
                    color:#000;
                    font:10px/14px Verdana,Arial,sans-serif;
                    height:240px;
                    padding:10px 0 0 0;
                    width:300px;
                }
            #navigation {
                    background-color:#babfc5;
                    color:#fff;
                    height:20px;
                    margin:0 0 0 10px;
                    width:280px;
                }
            #content {
                    background-color:#fff;
                    height:210px;
                    margin:0 0 0 10px;
                    position:relative;
                    width:280px;
                }
            #seite3 h1 {
                    background:url(http://www.millionenchance.de/syndication/mc-gadget/img/heading-ihr-kostenloses-lottofeld.gif) top left no-repeat #fff;
                    color:#ae0011;
                    font-size:15px;
                    margin:0;
                    padding:10px 0 0 7px;
                    height:24px;
                    text-indent:-9000px;
                }
            #lottofeld {
                    background-color:#efefef;
                    border:1px solid #babfc5;
                    float:left;
                    height:166px;
                    margin:0 0 0 3px;
                    padding:3px 0 0 6px;
                    text-align:center;
                    width:173px;
                }
            #lottofeld a {
                    background-color:#fff;
                    border:1px solid #babfc5;
                    color:#000;
                    display:block;
                    font-size:11px;
                    float:left;
                    height:17px;
                    margin:2px 2px 0 0;
                    padding:2px 0 0 0;
                    text-align:center;
                    text-decoration:none;
                    width:20px;
                }
            #lottofeld a:hover {
                    background-color:#f2f2f2;
                    font-weight:bold;
                }
            #lottofeld a.kreuz {
                    background-image:url(http://www.millionenchance.de/syndication/mc-gadget/img/kreuz.gif);
                }
            #lottofeld a.kreuz:hover {
                    font-weight:normal;
                }
            #sidebar {
                    background:url(http://www.millionenchance.de/syndication/mc-gadget/img/mc-logo-weiss.gif) bottom left no-repeat #fff;
                    float:right;
                    height:170px;
                    width:89px;
                }
            #sidebar p {
                    margin:10px 0 0 0;
                }
            #sidebar #actions {
                    line-height:2;
                    margin:5px 0 0 0;
                }
            #sidebar #actions img {
                    position:relative;
                    top:4px;
                }
        </style>
        <script type="text/javascript">
            var anzahlZahlen = 0;
            var zahlen = new Array();

            function toggleFeld(feldObject){
                var zahlVorhanden = false;

                // falls Zahl schon im Array dann löschen und Klasse zurücksetzen
                if(zahlen.length > 0){
                    for(var i=0;i<=zahlen.length;i++){
                        if(zahlen[i] == feldObject.firstChild.nodeValue){
                            zahlVorhanden = true;
                            // Element löschen
                            zahlen.splice(i, 1);
                            feldObject.className = "";
                            anzahlZahlen--;
                        }
                    }
                }
                if(anzahlZahlen < 6 && !zahlVorhanden){
                    zahlen.push(feldObject.firstChild.nodeValue);
                    feldObject.className = "kreuz";
                    anzahlZahlen++;
                    //alert("gesamt: " +anzahlZahlen + "\n" +zahlen[0] + ", " + zahlen[1] + ", " + zahlen[2] + ", " + zahlen[3] + ", " + zahlen[4] + ", " + zahlen[5] + ", ");
                }
            }

            function zahlenLoeschen(){
                // Zahlen vorhanden?
                if(zahlen.length > 0){
                    // dann CSS-Klasse löschen
                    for(var i=0;i<zahlen.length;i++){
                        _gel('lottofeld' + zahlen[i]).className = "";
                    }
                }
                // dann alle löschen
                zahlen.splice(0, 6);
                anzahlZahlen = 0;
            }

            function zahlenWuerfeln() {
                var zufallsZahlen = new Array();
                // vorsorglich alle (vorhandenen) Zahlen löschen
                zahlenLoeschen();
                for(var i=0;i<6;i++ ) {
                    zufallsZahlen[i] = Math.round((Math.random()*48)+1);
                    // auf doppelte Zahlen prüfen
                    for(var j=0;j<i;j++ ){
                        if(zufallsZahlen[i] == zufallsZahlen[j]) {
                            i--;
                            break;
                        }
                    }
                    // CSS-Klasse ändern und Zahlen hinzufügen
                    zahlen.push(zufallsZahlen[i]);
                    _gel('lottofeld' + zufallsZahlen[i]).className = "kreuz";
                    anzahlZahlen++;
                }
            }

            function getZiehungstagId(){
                var datum     = new Date()
                var wochentag = datum.getDay()
                var stunden   = datum.getHours();

                if((wochentag==4 && stunden >= 18) || wochentag==5 || (wochentag==6 && stunden <= 18)){
                    // Ziehungstag == Samstag
                    return 1;
                }else{
                    // Ziehungstag == Mittwoch
                    return 2;
                }
            }

            function generateLosnummer(){
                var losnummer = "";
            	for (var i=0;i<7;i++ )  {
            		losnummer += Math.round((Math.random()*9));
            	}
                return losnummer;
            }

            function getTipps(){
                var zahlenString = "";
                if(zahlen.length > 0){
                    for(var i=0;i<zahlen.length;i++){
                        zahlenString += zahlen[i];
                        if(i != (zahlen.length-1)){
                            zahlenString += "%2C";
                        }
                    }
                }
                return zahlenString;
            }

            function generateLink(){
                var link = "http://www.millionenchance.de/getLottoschein.jsp?sid=new&normSpiel77=0&normSuper6=0&normLaufzeitID=1&normZiehungID=" + getZiehungstagId() + "&normLosnummer=" + generateLosnummer() + "&normF1=" + getTipps() + "&insDepot=false&saveLottoScheinTypID=1";
                alert(link);
                window.open(link, 'millionenchance');
            }

            window.onload=function(){
                for(var i=1;i<=49;i++){
                    _gel('lottofeld' + i).onclick = function(){ toggleFeld(this); };
                }
                _gel('zahlenWuerfeln').onclick = function(){ zahlenWuerfeln(); };
                _gel('zahlenLoeschen').onclick = function(){ zahlenLoeschen(); };
                _gel('tippen').onclick = function(){ generateLink(); return false; };

            }
        </script>
        <div id="container">
            <div id="navigation">
                <a href="#" onclick="_toggle(seite2);_toggle(seite3);_toggle(seite1);">zu Seite 1</a> -----------
                <a href="#" onclick="_toggle(seite1);_toggle(seite3);_toggle(seite2);">zu Seite 2</a> -----------
                <a href="#" onclick="_toggle(seite1);_toggle(seite2);_toggle(seite3);">zu Seite 3</a>
            </div>
            <div id="content">
                <div id="seite1">
                    Seite 1
                </div>
                <div id="seite2" style="display:none;">
                    Seite 2
                </div>
                <div id="seite3" style="display:none;">
                    <h1>IHR KOSTENLOSES LOTTOFELD</h1>
                    <div id="lottofeld">
                        <a href="#" id="lottofeld1">1</a>
                        <a href="#" id="lottofeld2">2</a>
                        <a href="#" id="lottofeld3">3</a>
                        <a href="#" id="lottofeld4">4</a>
                        <a href="#" id="lottofeld5">5</a>
                        <a href="#" id="lottofeld6">6</a>
                        <a href="#" id="lottofeld7">7</a>
                        <a href="#" id="lottofeld8">8</a>
                        <a href="#" id="lottofeld9">9</a>
                        <a href="#" id="lottofeld10">10</a>
                        <a href="#" id="lottofeld11">11</a>
                        <a href="#" id="lottofeld12">12</a>
                        <a href="#" id="lottofeld13">13</a>
                        <a href="#" id="lottofeld14">14</a>
                        <a href="#" id="lottofeld15">15</a>
                        <a href="#" id="lottofeld16">16</a>
                        <a href="#" id="lottofeld17">17</a>
                        <a href="#" id="lottofeld18">18</a>
                        <a href="#" id="lottofeld19">19</a>
                        <a href="#" id="lottofeld20">20</a>
                        <a href="#" id="lottofeld21">21</a>
                        <a href="#" id="lottofeld22">22</a>
                        <a href="#" id="lottofeld23">23</a>
                        <a href="#" id="lottofeld24">24</a>
                        <a href="#" id="lottofeld25">25</a>
                        <a href="#" id="lottofeld26">26</a>
                        <a href="#" id="lottofeld27">27</a>
                        <a href="#" id="lottofeld28">28</a>
                        <a href="#" id="lottofeld29">29</a>
                        <a href="#" id="lottofeld30">30</a>
                        <a href="#" id="lottofeld31">31</a>
                        <a href="#" id="lottofeld32">32</a>
                        <a href="#" id="lottofeld33">33</a>
                        <a href="#" id="lottofeld34">34</a>
                        <a href="#" id="lottofeld35">35</a>
                        <a href="#" id="lottofeld36">36</a>
                        <a href="#" id="lottofeld37">37</a>
                        <a href="#" id="lottofeld38">38</a>
                        <a href="#" id="lottofeld39">39</a>
                        <a href="#" id="lottofeld40">40</a>
                        <a href="#" id="lottofeld41">41</a>
                        <a href="#" id="lottofeld42">42</a>
                        <a href="#" id="lottofeld43">43</a>
                        <a href="#" id="lottofeld44">44</a>
                        <a href="#" id="lottofeld45">45</a>
                        <a href="#" id="lottofeld46">46</a>
                        <a href="#" id="lottofeld47">47</a>
                        <a href="#" id="lottofeld48">48</a>
                        <a href="#" id="lottofeld49">49</a>
                    </div>
                    <div id="sidebar">
                        <p>Tippen Sie Ihre persönlichen Glückszahlen!</p>
                        <p id="actions">
                            <img src="http://www.millionenchance.de/syndication/mc-gadget/img/wuerfel.gif" width="11" height="13" alt="Würfel" title="Zufallszahlen" /> <a href="#" title="Zufallszahlen würfeln" id="zahlenWuerfeln">würfeln</a><br />
                            <img src="http://www.millionenchance.de/syndication/mc-gadget/img/muelleimer.gif" width="11" height="13" alt="Mülleimer" title="Zahlen löschen" /> <a href="#" title="Zahlen löschen" id="zahlenLoeschen">löschen</a>
                        </p>
                        <p><a href="http://www.millionenchance.de/lotto.jsp?sid=new"><img src="http://www.millionenchance.de/syndication/mc-gadget/img/button-tippen.jpg" width="81" height="31" alt="Tippen" title="Diese Zahlen tippen" id="tippen" /></a></p>
                    </div>
                </div>
             </div>
        </div>
    ]]></Content>
</Module>
